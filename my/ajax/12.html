<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
</head>
<body>
<div style="width:500px;height: 20px;border:1px solid gray"><div id="prog" style="height: 100%;width:0%;background-color: red;"></div></div>

<form action="12.php" method="post" enctype="multipart/form-data" target="frm">
    <p><input type="file" name="pic" id=""></p>
    <p><input type="text" name="bbb" id=""></p>
    <p><input type="submit" value="提交"></p>
</form>
<iframe src="12.php" name="frm"></iframe>
</body>
<script>
    var fm = document.getElementsByTagName('form')[0];
    fm.onsubmit = function(){
        //FormData会把表单的数据包括文件整体打包
        var fmdata = new FormData(this); //直接传入表单对象
        var xhr = new XMLHttpRequest();

        //xhr的上传组件
        xhr.upload.onprogress=function(ev){
            if(ev.lengthComputable==true){
                var per =100*ev.loaded/ev.total;
                document.getElementById('prog').style.width=per+'%';
            }
        }
        xhr.open('post','12-2.php',true);
        xhr.send(fmdata);
        return false;
    }
    alert('北京');
    alert(encodeURI('北京'));
</script>
</html>