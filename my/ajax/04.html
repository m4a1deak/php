<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
</head>
<body>
<form action="" method="post">
    <p>用户名:<input type="text" name="username"><span id="reg"></span></p>
    <p>邮箱:<input type="text" name="email"></p>
    <p><input type="submit" value="提交"></p>
</form>
</body>
<script>
    var user = document.getElementsByName('username')[0];
    var reg = document.getElementById('reg');
    user.onblur=function(){
        var url = './04.php?un='+this.value;
        //alert(url);
        var xhr = new XMLHttpRequest();
        xhr.onreadystatechange=function(){
            if(this.readyState==4){
                if(this.responseText == 0){
                    reg.innerHTML='<font color="green">可用</font>';
                }else{
                    reg.innerHTML='<font color="red">已被占用</font>';
                }
            }
        }
        xhr.open('get',url,true);
        xhr.send(null);
    }
</script>
</html>